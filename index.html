<!DOCTYPE html>
<html>
  <head> 
    <meta charset="utf-8">
    <title>AR con mi GLB</title>

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

    <!-- AR.js (marker + location) versión actual -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.7/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
      <!-- marcador: solo detecta -->
      <a-marker id="marcador" preset="hiro">
        <!-- lo dejamos vacío o podrías poner una guía -->
      </a-marker>

      <!-- modelo: fuera del marker para que no desaparezca -->
      <a-entity
        id="miModelo"
        gltf-model="url(modelos/mi-modelo.glb)"
        visible="false"
        scale="2 2 2"
        position="0 2 0"
        rotation="0 90 0">
      </a-entity>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      const marker = document.querySelector('#marcador');
      const modelo = document.querySelector('#miModelo');

      // cuando el marcador se ve
      marker.addEventListener('markerFound', () => {
        // tomamos la posición y rotación actuales del marcador
        const markerPos = marker.object3D.position;
        const markerRot = marker.object3D.rotation;

        // las copiamos al modelo
        modelo.object3D.position.copy(markerPos);
        modelo.object3D.rotation.copy(markerRot);

        // lo mostramos
        modelo.setAttribute('visible', 'true');
      });

      // cuando se pierde el marcador NO ocultamos el modelo
      marker.addEventListener('markerLost', () => {
        // no hacemos nada aquí para que el modelo se quede
      });
    </script>
  </body>
</html>
